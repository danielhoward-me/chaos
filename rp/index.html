<!DOCTYPE html>
<html>
<body>

<canvas id="canvas" width="500" height="500" style="border:1px solid #d3d3d3;"></canvas>
<br/>
<button disabled class="drawButton" onclick="drawRandomPoint()">Draw Random Point</button>
<button disabled class="drawButton" onclick="testRandomPoints()">Test Random Points</button>
<button onclick="reset()">Reset</button>

<script src="/static/js/points.js"></script>
<script>
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	let points = [];
	ctx.strokeStyle = 'black';

	function drawRandomPoint() {
		const point = getRandomPointInShape(...points);
		ctx.beginPath();
		ctx.arc(point[0], point[1], 2, 0, 2 * Math.PI);
		ctx.stroke();
	}

	function reset() {
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		points = [];
		setDrawButtonsDisabled(true);
	}

	function testRandomPoints() {
		const count = prompt('How many points to draw?');
		for (let i = 0; i < count; i++) {
			drawRandomPoint();
		}
	}

	function drawPointsOutline() {
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		ctx.beginPath();
		ctx.moveTo(...points[0]);
		points.slice(1).forEach((point) => {
			ctx.lineTo(...point);
		});
		ctx.closePath();
		ctx.stroke();
	}

	canvas.addEventListener('click', () => {
		points.push([event.offsetX, event.offsetY]);
		drawPointsOutline();
		setDrawButtonsDisabled(points.length < 3);
	});

	function setDrawButtonsDisabled(disabled) {
		document.querySelectorAll('.drawButton').forEach((button) => {
			button.disabled = disabled;
		});
	}
</script> 

</body>
</html>
